<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>EmergencyApp</title>
  <link rel="stylesheet" href="./style.css">

</head>
<body>
<!-- partial:index.partial.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EMERGENCY.app</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Pantalla de bienvenida -->
  <div id="welcome" class="screen active">
    <h1>🚨 EMERGENCY.app</h1>
    <button onclick="goToLogin()">ENTRAR</button>
  </div>

  <!-- Pantalla de login -->
  <div id="login" class="screen">
    <h2>INICIAR SESIÓN</h2>
    <form id="loginForm">
      <input type="email" placeholder="CORREO" id="loginEmail" required />
      <div class="password-wrapper">
        <input type="password" placeholder="CONTRASEÑA" id="loginPassword" required />
        <span class="toggle-password" onclick="togglePassword('loginPassword', this)">😎</span>
      </div>
      <button type="submit">ENTRAR</button>
    </form>
    <p>
      ¿NO TIENES CUENTA? <a href="#" onclick="showScreen('register')">REGÍSTRATE</a><br />
      ¿<a href="#" onclick="showScreen('forgotPassword')">OLVIDÉ MI CONTRASEÑA</a>?
    </p>
  </div>

  <!-- Pantalla de registro -->
  <div id="register" class="screen">
    <h2>CREAR CUENTA</h2>
    <form id="registerForm">
      <input type="text" placeholder="NOMBRE" id="regName" required />
      <input type="email" placeholder="CORREO" id="regEmail" required />
      <div class="password-wrapper">
        <input type="password" placeholder="CONTRASEÑA" id="regPassword" required />
        <span class="toggle-password" onclick="togglePassword('regPassword', this)">🫡</span>
      </div>
      <select id="regSecurityQuestion" required>
        <option value="">SELECCIONA UNA PREGUNTA DE SEGURIDAD</option>
        <option value="¿Cuál es el nombre de tu primera mascota?">¿Cuál es el nombre de tu primera mascota?</option>
        <option value="¿Cuál es tu comida favorita?">¿Cuál es tu comida favorita?</option>
        <option value="¿En qué ciudad naciste?">¿En qué ciudad naciste?</option>
      </select>
      <input type="text" placeholder="RESPUESTA DE SEGURIDAD" id="regSecurityAnswer" required />
      <button type="submit">REGISTRAR</button>
    </form>
    <p>¿YA TIENES CUENTA? <a href="#" onclick="showScreen('login')">INICIA SESIÓN</a></p>
  </div>

  <!-- Pantalla "Olvidé mi contraseña" -->
  <div id="forgotPassword" class="screen">
    <h2>OLVIDÉ MI CONTRASEÑA</h2>
    <form id="forgotForm">
      <input type="email" placeholder="CORREO" id="forgotEmail" required />
      <button type="button" onclick="checkSecurityQuestion()">SIGUIENTE</button>
    </form>

    <div id="securityQuestionSection" style="display:none; margin-top: 15px;">
      <p id="displaySecurityQuestion"></p>
      <input type="text" placeholder="RESPUESTA" id="forgotAnswer" />
      <button type="button" onclick="resetPassword()">RESTABLECER CONTRASEÑA</button>
    </div>

    <p><a href="#" onclick="showScreen('login')">Regresar a iniciar sesión</a></p>
  </div>

  <!-- Pantalla principal -->
  <div id="main" class="screen">
    <div class="header">
      <h3>🚑 EMERGENCY.app</h3>
      <div class="menu-icon">☰</div>
    </div>

    <div class="main-buttons">
      <div onclick="alert('Función REPORTAR no implementada.')">
        <img src="https://img.icons8.com/ios-filled/50/FFD700/error.png" alt="Reportar" />
        <p>REPORTAR</p>
      </div>
      <div onclick="alert('Función LLAMAR no implementada.')">
        <img src="https://img.icons8.com/ios-filled/50/FFD700/phone.png" alt="Llamar" />
        <p>LLAMAR</p>
      </div>
    </div>

    <div class="map-container">
      <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3168.948883603606!2d-122.08424938469253!3d37.42206577982568!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x808fb5d3b00c37c3%3A0x11a6057205487bdb!2sGoogleplex!5e0!3m2!1ses!2smx!4v1689594000000!5m2!1ses!2smx"
        allowfullscreen
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"
      ></iframe>
    </div>

    <button onclick="goToMap()" class="start-button">START</button>
    <button onclick="logout()">CERRAR SESIÓN</button>

    <!-- Chat -->
    <div id="chatWrapper" style="display:none;">
      <button onclick="toggleChat()">🤖</button>
      <div id="chatBox" style="display:none;">
        <h4>AYUDA MÉDICA</h4>
        <div>🤖 ¿QUÉ EMERGENCIA MÉDICA TIENES?</div>
        <input id="chatInput" type="text" placeholder="ESCRIBE AQUÍ..." />
        <button id="sendBtn">ENVIAR</button>
        <div id="chatMessages"></div>
      </div>
    </div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/localforage/1.10.0/localforage.min.js"></script>
  <script src="script.js"></script>

  <!-- Mostrar/Ocultar contraseña -->
  <script>
    function togglePassword(inputId, icon) {
      const input = document.getElementById(inputId);
      if (input.type === "password") {
        input.type = "text";
        icon.textContent = "🙂";
      } else {
        input.type = "password";
        icon.textContent = "😑";
      }
    }
  </script>
</body>
</html>
<!-- partial -->
  <script  src="./script.js"></script>

</body>
</html>
